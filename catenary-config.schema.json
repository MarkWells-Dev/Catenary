{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Catenary Configuration",
  "type": "object",
  "properties": {
    "idle_timeout": {
      "type": "integer",
      "description": "Global idle timeout in seconds. LSP servers will be shut down if no documents are open for this duration.",
      "default": 300
    },
    "smart_wait": {
      "type": "boolean",
      "description": "Wait for LSP servers to be fully ready (initialized) before executing requests.",
      "default": true
    },
    "server": {
      "type": "object",
      "description": "Server definitions keyed by language ID (e.g., 'rust', 'python').",
      "additionalProperties": {
        "$ref": "#/definitions/server_config"
      }
    }
  },
  "definitions": {
    "server_config": {
      "type": "object",
      "required": ["command"],
      "properties": {
        "command": {
          "type": "string",
          "description": "The command to execute (e.g., 'rust-analyzer', 'pyright-langserver')."
        },
        "args": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Arguments to pass to the command.",
          "default": []
        },
        "initialization_options": {
          "type": "object",
          "description": "Initialization options to pass to the LSP server during the 'initialize' request.",
          "additionalProperties": true
        }
      }
    }
  }
}
